# ============================================
# НАСТРОЙКИ ДЛЯ DOCKER COMPOSE (.env файл)
# ============================================
# Этот файл содержит настройки ДЛЯ DOCKER окружения
# Скопируйте в .env при работе с docker-compose
# ============================================

# Docker Compose настройки
COMPOSE_PROJECT_NAME=habitflow
COMPOSE_PROFILES=full

# ============================================
# БЕЗОПАСНОСТЬ DJANGO (Docker версия)
# ============================================
DEBUG=True
DJANGO_SECRET_KEY=ваш-секретный-ключ-для-docker-окружения

# В Docker используем имена сервисов как хосты
ALLOWED_HOSTS=localhost,127.0.0.1,habitflow-web,nginx,db,redis
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:8080
CSRF_TRUSTED_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:8000

# ============================================
# БАЗА ДАННЫХ (Docker Postgres)
# ============================================
# В Docker используем имена сервисов вместо localhost
POSTGRES_DB=habitflow_db
POSTGRES_USER=habitflow_user
POSTGRES_PASSWORD=secure_password_123_change_me
POSTGRES_HOST=db          # ← Имя сервиса из docker-compose.yml
POSTGRES_PORT=5432
USE_POSTGRESQL=True
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ============================================
# REDIS (Docker версия)
# ============================================
REDIS_PASSWORD=redis_password_123_change_me
REDIS_HOST=redis          # ← Имя сервиса из docker-compose.yml
REDIS_PORT=6379
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/0

# ============================================
# CELERY (Docker версия)
# ============================================
CELERY_BROKER_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/1
CELERY_RESULT_BACKEND=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/2
CELERY_WORKER_CONCURRENCY=4

# ============================================
# TELEGRAM БОТ (Docker версия)
# ============================================
TELEGRAM_BOT_TOKEN=ваш-телеграм-токен-от-botfather
TELEGRAM_BOT_USERNAME=ваш_bot_username
# В Docker webhook указывает на nginx
TELEGRAM_WEBHOOK_URL=http://nginx/api/telegram/webhook/
TELEGRAM_WEBHOOK_SECRET=webhook_secret_123

# ============================================
# NGINX (только для Docker)
# ============================================
NGINX_HOST=localhost
NGINX_PORT=80
NGINX_SSL_ENABLED=False

# ============================================
# ДОПОЛНИТЕЛЬНЫЕ DOCKER НАСТРОЙКИ
# ============================================
HEALTH_CHECK_TIMEOUT=30
DJANGO_SETTINGS_MODULE=config.settings
PYTHONUNBUFFERED=1